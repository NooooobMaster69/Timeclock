<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>360WPT TimeClock</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(to bottom right, #eef2ff, #e0e7ff);
      margin: 0;
      padding: 0;
      color: #222;
    }

    h1 {
      text-align: center;
      margin-top: 30px;
      color: #1e40af;
    }

    .container {
  width: 85%;          /* ç»Ÿä¸€å®½åº¦ï¼Œæ‰‹æœºä¹Ÿæ›´æ»¡ä¸€ç‚¹ */
  max-width: 900px;
  margin: 20px auto;
  background: white;
  padding: 24px 24px 22px;
  border-radius: 22px;
  box-shadow: 0 8px 22px rgba(15, 23, 42, 0.12);
}

/* é¡¶éƒ¨æ¬¢è¿å¡ç‰‡ */
#welcomeCard {
  width: 85%;          /* âœ… å’Œ .container ä¸€æ ·å®½ */
  max-width: 900px;
  margin: -10px auto 20px;
  padding: 16px 20px;
  background: linear-gradient(135deg, #60a5fa, #3b82f6);
  border-radius: 18px;
  color: white;
  display: flex;
  align-items: center;
  gap: 16px;
  box-shadow: 0 6px 18px rgba(37, 99, 235, .35);
  animation: fadeIn .6s ease-out;
}
    #welcomeEmoji {
      font-size: 38px;
    }
    #hello {
      font-size: 22px;
      font-weight: 700;
    }
    #hello-date {
      font-size: 14px;
      opacity: .9;
      margin-top: 2px;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-8px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* æ ‡é¢˜ */
    h2 {
      margin-top: 0;
      margin-bottom: 14px;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* å½“å‰å·¥ä½œçŠ¶æ€æ¡ */
    .status-card {
      display: flex;
      align-items: center;
      padding: 10px 14px;
      border-radius: 999px;
      background: #f1f5ff;
      border: 1px solid #e0e7ff;
      margin-bottom: 18px;
    }
    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: #22c55e;
      margin-right: 10px;
      flex-shrink: 0;
    }
    .status-label {
      font-weight: 600;
    }
    .status-sub {
      font-size: 13px;
      color: #6b7280;
    }
.label-short{ display:none; }

    /* æŒ‰é’®è¡Œ */
    .btn-row {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin-bottom: 14px;
      flex-wrap: wrap;
    }
/* Rest è¡Œï¼šæ›´çª„ä¸€ç‚¹ï¼Œåˆ«å å¤ªå¤šç©ºé—´ */
.btn-row.rest-row{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;            /* ç¨å¾®æ”¶ç´§ */
  max-width: 380px;     /* âœ… è¿™é‡Œæ§åˆ¶â€œæ•´è¡Œå®½åº¦â€ï¼Œä½ æƒ³æ›´çª„å¯ç”¨ 440 */
  margin: 0 auto 14px;
}

/* Rest è¡ŒæŒ‰é’®ï¼šç¨å¾®æ”¶ä¸€ç‚¹å†…è¾¹è·ï¼Œä¸”ä¸å…è®¸æ–‡å­—ä¹±æ¢è¡Œ */
.btn-row.rest-row button{
  width: 100%;
  padding: 10px 14px;   /* âœ… åªå½±å“ rest è¡Œï¼Œä¸ä¼šå½±å“å…¶å®ƒè¡Œ */
  white-space: nowrap;  /* âœ… é¿å… â€œStart Rest Breakâ€ è¢«æŒ¤æˆä¸¤è¡Œ */
}

/* Paid badge ä¸è¦è¢«å‹æ‰/æ¢è¡Œ */
.paid-badge{
  flex-shrink: 0;
}

/* æ›´å°å±å†æ”¹æˆä¸€åˆ—ï¼ˆé¿å…ä¸¤åˆ—å¤ªæŒ¤ï¼‰ */
/* æ‰‹æœºï¼šç”¨çŸ­å­—ï¼Œä¿æŒä¸¤åˆ—ï¼Œä¸è¦å¼ºåˆ¶å˜ä¸€åˆ— */
@media (max-width: 430px){
  .label-full{ display:none; }
  .label-short{ display:inline; }

  .btn-row.rest-row{
    grid-template-columns: 1fr 1fr; /* âœ… æ‰‹æœºä¹Ÿä¿æŒä¸¤åˆ— */
    max-width: 100%;
    gap: 12px;
  }

  .btn-row.rest-row button{
    padding: 10px 12px;
    font-size: 14px;
    white-space: nowrap; /* âœ… é˜²æ­¢åˆè¢«æŒ¤æ¢è¡Œ */
  }
}

/* æå°å±æ‰æ”¹ä¸€åˆ—ï¼ˆå¯é€‰ï¼‰ */
@media (max-width: 320px){
  .btn-row.rest-row{
    grid-template-columns: 1fr;
  }
}




.logout-btn {
  border-radius: 999px;
  border: 1px solid rgba(248, 250, 252, 0.85);
  padding: 6px 14px;
  font-size: 13px;
  font-weight: 500;
  background: rgba(15, 23, 42, 0.2);
  color: #f9fafb;
  cursor: pointer;
  box-shadow: none;
  transition: background 0.15s ease, transform 0.15s ease;
}
.logout-btn:hover {
  background: rgba(15, 23, 42, 0.3);
  transform: translateY(-1px);
}
.logout-btn:active {
  transform: translateY(0);
}

    button {
      padding: 10px 18px;
      border: none;
      border-radius: 12px;
      color: white;
      cursor: pointer;
      font-size: 15px;
      transition: .15s;
      box-shadow: 0 4px 12px rgba(15, 23, 42, 0.12);
    }
    button:hover { transform: translateY(-1px); box-shadow: 0 6px 16px rgba(15,23,42,0.16); }
    button:active { transform: translateY(0); box-shadow: 0 3px 10px rgba(15,23,42,0.12); }

    .blue   { background: #2563eb; }
    .green  { background: #16a34a; }
    .orange { background: #f97316; }
    .purple { background: #7c3aed; }
    .black  { background: #1e293b; }
    .red    { background: #dc2626; }

    /* disabled çŠ¶æ€ç»Ÿä¸€å¤„ç† */
    button[disabled] {
      background: #cbd5e1 !important;
      cursor: not-allowed !important;
      transform: none !important;
      opacity: .75;
      box-shadow: none;
    }
/* Start Rest Break æŒ‰é’®é‡Œçš„ Paid badge */
.rest-start{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.paid-badge{
  font-size: 12px;
  font-weight: 700;
  padding: 2px 8px;
  border-radius: 999px;
  background: rgba(255,255,255,0.22);
  border: 1px solid rgba(255,255,255,0.35);
  line-height: 1.2;
}

button[disabled] .paid-badge{
  opacity: 0.85;
}

    /* Rest æç¤º */
    .rest-block {
      text-align: center;
      margin-top: 4px;
    }
    .rest-hint {
  color: #6b7280;
      font-size: 12px;
      margin-top: 4px;
      opacity: 0.9;
    }

    /* Summary åŒºåŸŸä¸­çš„æŒ‰é’® */
    .summary-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
    }
    .summary-buttons button {
      flex: 1 1 160px;
    }
/* æ‰‹æœºç«¯ä¼˜åŒ– Summary Zone æŒ‰é’®å¤§å° */
@media (max-width: 600px) {
  .summary-buttons {
    justify-content: center;   /* æŠŠæŒ‰é’®æ•´ä½“å±…ä¸­ */
  }

  .summary-buttons button {
    flex: 0 0 78%;            /* ä¸å†è‡ªåŠ¨å æ»¡æ•´è¡Œï¼Œå›ºå®šåœ¨ 70â€“80% å·¦å³ */
    max-width: 280px;         /* ä¸Šé™ï¼Œé¿å…å¤ªå¤§ */
    font-size: 14px;          /* å­—ä½“ç¨å¾®å°ä¸€ç‚¹ï¼Œæ²¡é‚£ä¹ˆâ€œæ†¨â€ */
    padding: 10px 14px;       /* å†…è¾¹è·ä¹Ÿç¨å¾®æ”¶ä¸€ç‚¹ */
  }
}

    /* Custom range åŒºåŸŸ */
    .custom-range {
  margin-top: 10px;
  padding-top: 8px;
  border-top: 1px dashed #e2e8f0;
  font-size: 14px;
  display: flex;             /* âœ… æŒ‰è¡Œæ’ç‰ˆ */
  flex-wrap: wrap;           /* å°å±è‡ªåŠ¨æ¢è¡Œ */
  align-items: center;
  gap: 6px;
}
.custom-range input[type="date"] {
  padding: 5px 7px;
  border-radius: 8px;
  border: 1px solid #cbd5e1;
  font-size: 13px;
}
@media (max-width: 480px) {
  /* Summary ä¸‰ä¸ªæŒ‰é’®ï¼šç«–ç€æ’ï¼Œä½†ä¸è¦â€œé¡¶æ»¡â€æ•´è¡Œ */
  .summary-buttons {
    flex-direction: column;   /* ä¸€åˆ— */
    align-items: center;      /* å±…ä¸­ */
  }
  .summary-buttons button {
    width: 80%;               /* âœ… ä¸å† 100% äº† */
    max-width: 260px;         /* ä¸Šé™ */
  }
}



    /* Recent records åˆ—è¡¨ */
    #log {
      max-height: 320px;
      overflow-y: auto;
      margin-top: 10px;
      padding-right: 4px;
      font-size: 14px;
    }

    /* Admin åŒºåŸŸ */
    #adminZone {
      margin-top: 18px;
      padding-top: 10px;
      border-top: 1px dashed #cbd5e1;
      display: none; /* é»˜è®¤éšè—ï¼Œåªå¯¹ admin æ‰“å¼€ */
      font-size: 14px;
    }

    /* Pay period çŠ¶æ€æ¡ */
    .pay-period-bar {
      display: none;            /* é»˜è®¤éšè—ï¼Œç­‰ JS åˆ¤æ–­æ˜¯å‘˜å·¥å†æ˜¾ç¤º */
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      margin-bottom: 10px;
      border-radius: 999px;
      background: #eff6ff;
      border: 1px dashed #bfdbfe;
      font-size: 14px;
      color: #1e3a8a;
    }
    .pay-period-badge {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: .04em;
      padding: 3px 8px;
      border-radius: 999px;
      background: #dbeafe;
      color: #1d4ed8;
      font-weight: 600;
      flex-shrink: 0;
    }
    .pay-period-range {
      font-weight: 500;
    }

        /* ---- å…¨å±€ toast æ°”æ³¡ ---- */
    #toast {
      position: fixed;
      right: 16px;
      bottom: 16px;
      display: inline-block;
width: fit-content;
max-width: min(640px, calc(100vw - 32px)); /* ä¸Šé™æ”¾å®½ä¸€ç‚¹ï¼Œä½†ä¸ä¼šå¼ºè¡Œå˜å®½ */
min-width: 300px;

/* âœ… å…³é”®ï¼šå·¦å³ç•™ç™½åŠ å¤§ï¼Œç«‹åˆ»â€œä¸æŒ¤â€ï¼Œä½†ä¸ä¼šäº§ç”Ÿå·¨å¤§ç©ºç™½ */
padding: 12px 22px;

      background: #111827;
      color: #f9fafb;
      font-size: 14px;
      border-radius: 999px;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.35);
      opacity: 0;
      transform: translateY(10px);
      pointer-events: none;
      transition: opacity .25s ease, transform .25s ease;
      z-index: 9999;
      line-height: 1.4;
      text-align: left;
      white-space: pre-line; /* æ”¯æŒ \n æ¢è¡Œ */
    }

    #toast.show {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }


  </style>
</head>
<body>

<h1>360WPT TimeClock</h1>

<!-- é¡¶éƒ¨æ¬¢è¿å¡ç‰‡ -->
<div id="welcomeCard">
  <div style="display:flex; justify-content:space-between; align-items:center; width:100%;">
    <div style="display:flex; align-items:center; gap:16px;">
      <div id="welcomeEmoji">ğŸ‘‹</div>
      <div>
        <div id="hello"></div>
        <div id="hello-date"></div>
      </div>
    </div>

    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>
</div>


<!-- å‘˜å·¥æ‰“å¡åŒºåŸŸï¼ˆadmin ä¼šè¢« JS éšè—ï¼‰ -->
<div class="container" id="clockContainer">
  <h2>ğŸ•’ Clocking Zone</h2>

  <!-- å½“å‰çŠ¶æ€ -->
  <div class="status-card">
    <div class="status-dot" id="statusDot"></div>
    <div>
      <div class="status-label" id="statusText">Loading statusâ€¦</div>
      <div class="status-sub">Your current work status</div>
    </div>
  </div>

  <div class="btn-row">
    <button class="blue" onclick="clock('CLOCK_IN')">Clock In</button>
    <button class="blue" onclick="clock('CLOCK_OUT')">Clock Out</button>
  </div>

  <div class="btn-row">
    <button class="green" onclick="clock('MEAL_IN')">Start Lunch Break</button>
    <button class="green" onclick="clock('MEAL_OUT')">End Lunch Break</button>
  </div>

<div class="rest-block">
  <div class="btn-row rest-row">
    <button class="orange rest-start" id="restBtn" onclick="clock('REST_IN')">
      <span class="label-full">Start Rest Break</span>
      <span class="label-short">Start Rest</span>
      <span class="paid-badge">Paid</span>
    </button>

    <button class="orange" id="restOutBtn" onclick="clock('REST_OUT')">
      <span class="label-full">End Rest Break</span>
      <span class="label-short">End Rest</span>
    </button>
  </div>
</div>


<!-- Summary / Export / Recordsï¼ˆadmin/employee å…±ç”¨ï¼‰ -->
<div class="container">
  <h2 id="summaryTitle">ğŸ“Š Summary Zone</h2>
  <div class="pay-period-bar" id="payPeriodBar">
    <span class="pay-period-badge" id="payPeriodLabel">Current pay period</span>
    <span class="pay-period-range" id="payPeriodRange">Loadingâ€¦</span>
  </div>
<div class="summary-buttons" id="employeeSummaryButtons">
  <button class="purple" onclick="viewSummary()">View Hours This Period</button>
  <button class="black"  onclick="exportMyCurrent()">Export Current Period</button>
  <button class="black"  onclick="exportMyAll()">Export All History</button>
</div>

<div class="custom-range" id="employeeCustomRange">
  <span>Custom range (me):</span>
  <input type="date" id="myRangeStart" />
  <span>to</span>
  <input type="date" id="myRangeEnd" />
  <button class="black" onclick="exportMyCustom()">Export</button>
</div>



  <!-- Recent recordsï¼šæ™®é€šå‘˜å·¥æ˜¾ç¤ºï¼Œadmin ä¼šè¢« JS éšè— -->
  <div id="log"></div>

  <!-- Admin only å¯¼å‡º -->
  <div id="adminZone">
    <h3>ğŸ‘‘ Admin Zone</h3>

    <div style="margin-bottom:8px;">
      <label for="adminEmployeeSelect" style="margin-right:4px;">Employee:</label>
      <select id="adminEmployeeSelect" style="padding:4px 6px; border-radius:6px; border:1px solid #cbd5e1;">
        <option value="">All employees</option>
      </select>
    </div>

    <div class="summary-buttons" style="margin-bottom: 6px;">
      <button class="purple" onclick="adminExportCurrent()">Export Current Period</button>
      <button class="black"  onclick="adminExportAll()">Export All History</button>
    </div>

    <div class="custom-range" style="border-top:none; padding-top:0; margin-top:4px;">
      <div style="margin-bottom: 4px;">Custom range (admin):</div>
      <input type="date" id="adminRangeStart" />
      <span style="margin: 0 4px;">to</span>
      <input type="date" id="adminRangeEnd" />
      <button class="black" style="margin-left: 6px;" onclick="adminExportCustom()">Export</button>
    </div>
  </div>
</div>

<div id="toast"></div>

<!-- å‰ç«¯é€»è¾‘ -->
<script src="/app.js"></script>

</body>
</html>
