<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>360WPT TimeClock</title>
  <style>


    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(to bottom right, #eef2ff, #e0e7ff);
      margin: 0;
      padding: 0;
      color: #222;
    }

    h1 {
      text-align: center;
      margin-top: 30px;
      color: #1e40af;
    }

    .container {
  width: 85%;          /* ç»Ÿä¸€å®½åº¦ï¼Œæ‰‹æœºä¹Ÿæ›´æ»¡ä¸€ç‚¹ */
  max-width: 900px;
  margin: 20px auto;
  background: white;
  padding: 24px 24px 22px;
  border-radius: 22px;
  box-shadow: 0 8px 22px rgba(15, 23, 42, 0.12);
}




/* é¡¶éƒ¨æ¬¢è¿å¡ç‰‡ */
#welcomeCard {
  width: 85%;          /* âœ… å’Œ .container ä¸€æ ·å®½ */
  max-width: 900px;
  margin: -10px auto 20px;
  padding: 16px 20px;
  background: linear-gradient(135deg, #60a5fa, #3b82f6);
  border-radius: 18px;
  color: white;
  display: flex;
  align-items: center;
  gap: 16px;
  box-shadow: 0 6px 18px rgba(37, 99, 235, .35);
  animation: fadeIn .6s ease-out;
}
    #welcomeEmoji {
      font-size: 38px;
    }
    #hello {
      font-size: 22px;
      font-weight: 700;
    }
    #hello-date {
      font-size: 14px;
      opacity: .9;
      margin-top: 2px;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-8px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* æ ‡é¢˜ */
    h2 {
      margin-top: 0;
      margin-bottom: 14px;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* å½“å‰å·¥ä½œçŠ¶æ€æ¡ */
    .status-card {
      display: flex;
      align-items: center;
      padding: 10px 14px;
      border-radius: 999px;
      background: #f1f5ff;
      border: 1px solid #e0e7ff;
      margin-bottom: 18px;
    }
    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: #22c55e;
      margin-right: 10px;
      flex-shrink: 0;
    }
    .status-label {
      font-weight: 600;
    }
    .status-sub {
      font-size: 13px;
      color: #6b7280;
    }
.label-short{ display:none; }

    /* æŒ‰é’®è¡Œ */
    .btn-row {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin-bottom: 14px;
      flex-wrap: wrap;
    }
/* Rest è¡Œï¼šæ›´çª„ä¸€ç‚¹ï¼Œåˆ«å å¤ªå¤šç©ºé—´ */
.btn-row.rest-row{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;            /* ç¨å¾®æ”¶ç´§ */
  max-width: 380px;     /* âœ… è¿™é‡Œæ§åˆ¶â€œæ•´è¡Œå®½åº¦â€ï¼Œä½ æƒ³æ›´çª„å¯ç”¨ 440 */
  margin: 0 auto 14px;
}

/* Rest è¡ŒæŒ‰é’®ï¼šç¨å¾®æ”¶ä¸€ç‚¹å†…è¾¹è·ï¼Œä¸”ä¸å…è®¸æ–‡å­—ä¹±æ¢è¡Œ */
.btn-row.rest-row button{
  width: 100%;
  padding: 10px 14px;   /* âœ… åªå½±å“ rest è¡Œï¼Œä¸ä¼šå½±å“å…¶å®ƒè¡Œ */
  white-space: nowrap;  /* âœ… é¿å… â€œStart Rest Breakâ€ è¢«æŒ¤æˆä¸¤è¡Œ */
}

/* Paid badge ä¸è¦è¢«å‹æ‰/æ¢è¡Œ */
.paid-badge{
  flex-shrink: 0;
}

/* æ›´å°å±å†æ”¹æˆä¸€åˆ—ï¼ˆé¿å…ä¸¤åˆ—å¤ªæŒ¤ï¼‰ */
/* æ‰‹æœºï¼šç”¨çŸ­å­—ï¼Œä¿æŒä¸¤åˆ—ï¼Œä¸è¦å¼ºåˆ¶å˜ä¸€åˆ— */
@media (max-width: 430px){
  .label-full{ display:none; }
  .label-short{ display:inline; }

  .btn-row.rest-row{
    grid-template-columns: 1fr 1fr; /* âœ… æ‰‹æœºä¹Ÿä¿æŒä¸¤åˆ— */
    max-width: 100%;
    gap: 12px;
  }

  .btn-row.rest-row button{
    padding: 10px 12px;
    font-size: 14px;
    white-space: nowrap; /* âœ… é˜²æ­¢åˆè¢«æŒ¤æ¢è¡Œ */
  }
}

/* æå°å±æ‰æ”¹ä¸€åˆ—ï¼ˆå¯é€‰ï¼‰ */
@media (max-width: 320px){
  .btn-row.rest-row{
    grid-template-columns: 1fr;
  }
}




.logout-btn {
  border-radius: 999px;
  border: 1px solid rgba(248, 250, 252, 0.85);
  padding: 6px 14px;
  font-size: 13px;
  font-weight: 500;
  background: rgba(15, 23, 42, 0.2);
  color: #f9fafb;
  cursor: pointer;
  box-shadow: none;
  transition: background 0.15s ease, transform 0.15s ease;
}
.logout-btn:hover {
  background: rgba(15, 23, 42, 0.3);
  transform: translateY(-1px);
}
.logout-btn:active {
  transform: translateY(0);
}

    button {
      padding: 10px 18px;
      border: none;
      border-radius: 12px;
      color: white;
      cursor: pointer;
      font-size: 15px;
      transition: .15s;
      box-shadow: 0 4px 12px rgba(15, 23, 42, 0.12);
    }
    button:hover { transform: translateY(-1px); box-shadow: 0 6px 16px rgba(15,23,42,0.16); }
    button:active { transform: translateY(0); box-shadow: 0 3px 10px rgba(15,23,42,0.12); }

    .blue   { background: #2563eb; }
    .green  { background: #16a34a; }
    .orange { background: #f97316; }
    .purple { background: #7c3aed; }
    .black  { background: #1e293b; }
    .red    { background: #dc2626; }

        .admin-filters {
      margin-bottom: 8px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: flex-end;
    }
    .admin-field label {
      margin-right: 4px;
      font-weight: 600;
      color: #475569;
    }
    .admin-select {
      padding: 4px 6px;
      border-radius: 6px;
      border: 1px solid #cbd5e1;
      background: #fff;
    }
    .admin-filter-hint {
      font-size: 12px;
      color: #64748b;
    }
    .admin-panel {
      margin-top: 14px;
    }
    .admin-panel-title {
      font-weight: 800;
      margin: 10px 0 8px;
    }
    .admin-summary-buttons {
      margin-bottom: 6px;
    }
    .admin-custom-range {
      border-top: none;
      padding-top: 0;
      margin-top: 4px;
    }
    .admin-custom-range span {
      margin: 0 4px;
    }
    .admin-custom-range .admin-export-btn {
      margin-left: 6px;
    }
    .admin-mp-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .admin-mp-card {
      border: 1px solid #e2e8f0;
      border-radius: 14px;
      padding: 12px;
      background: #fff;
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: flex-start;
    }
    .admin-mp-meta {
      font-weight: 800;
      color: #0f172a;
    }
    .admin-mp-id {
      color: #64748b;
      font-weight: 600;
    }
    .admin-mp-sub {
      margin-top: 2px;
      color: #334155;
      font-size: 13px;
    }
    .admin-mp-details {
      margin-top: 6px;
      color: #475569;
      font-size: 12px;
      line-height: 1.35;
    }
    .admin-mp-actions {
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-width: 140px;
    }

.account-card {
  margin-top: 16px;
  border: 1px solid #e2e8f0;
  border-radius: 16px;
  padding: 14px 16px;
  background: #f8fafc;
}

/* âœ… å…³é”®ï¼šé¿å… input padding/border æŠŠå®½åº¦æ’‘çˆ†å¯¼è‡´é‡å /è¶…å®½ */
.account-card,
.account-card * {
  box-sizing: border-box;
}

.account-form {
  display: grid;
  /* âœ… å…³é”®ï¼šminmax(0,1fr) é˜²æ­¢å†…å®¹æŠŠåˆ—æ’‘çˆ† */
  grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
  gap: 10px;
  align-items: end;
}

.account-field {
  min-width: 0;
}

.account-field input {
  width: 100%;
  min-width: 0;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid #cbd5e1;
}

/* æ‰‹æœºç«¯ï¼šä¸‰åˆ—å˜ä¸€åˆ—ï¼ŒæŒ‰é’®ä¸æŒ¤å‹ */
@media (max-width: 640px) {
  .account-form { grid-template-columns: 1fr; }
  .account-actions button { width: 100%; }
}

    .account-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .review-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .review-overlay.show {
      display: flex;
    }
    .review-modal {
      width: min(480px, 92vw);
      background: #fff;
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.2);
    }
    .review-modal h3 {
      margin: 0 0 8px;
    }
    .review-modal textarea {
      width: 100%;
      min-height: 90px;
      border-radius: 10px;
      border: 1px solid #cbd5e1;
      padding: 8px 10px;
      resize: vertical;
      font-family: inherit;
    }
    .review-actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 12px;
    }

    /* disabled çŠ¶æ€ç»Ÿä¸€å¤„ç† */
    button[disabled] {
      background: #cbd5e1 !important;
      cursor: not-allowed !important;
      transform: none !important;
      opacity: .75;
      box-shadow: none;
    }
/* Start Rest Break æŒ‰é’®é‡Œçš„ Paid badge */
.rest-start{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.paid-badge{
  font-size: 12px;
  font-weight: 700;
  padding: 2px 8px;
  border-radius: 999px;
  background: rgba(255,255,255,0.22);
  border: 1px solid rgba(255,255,255,0.35);
  line-height: 1.2;
}

button[disabled] .paid-badge{
  opacity: 0.85;
}

    /* Rest æç¤º */
    .rest-block {
      text-align: center;
      margin-top: 4px;
    }
    .rest-hint {
  color: #6b7280;
      font-size: 12px;
      margin-top: 4px;
      opacity: 0.9;
    }

    /* Summary åŒºåŸŸä¸­çš„æŒ‰é’® */
    .summary-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
    }
    .summary-buttons button {
      flex: 1 1 160px;
    }
/* æ‰‹æœºç«¯ä¼˜åŒ– Summary Zone æŒ‰é’®å¤§å° */
@media (max-width: 600px) {
  .summary-buttons {
    justify-content: center;   /* æŠŠæŒ‰é’®æ•´ä½“å±…ä¸­ */
  }

  .summary-buttons button {
    flex: 0 0 78%;            /* ä¸å†è‡ªåŠ¨å æ»¡æ•´è¡Œï¼Œå›ºå®šåœ¨ 70â€“80% å·¦å³ */
    max-width: 280px;         /* ä¸Šé™ï¼Œé¿å…å¤ªå¤§ */
    font-size: 14px;          /* å­—ä½“ç¨å¾®å°ä¸€ç‚¹ï¼Œæ²¡é‚£ä¹ˆâ€œæ†¨â€ */
    padding: 10px 14px;       /* å†…è¾¹è·ä¹Ÿç¨å¾®æ”¶ä¸€ç‚¹ */
  }
}

    /* Custom range åŒºåŸŸ */
    .custom-range {
  margin-top: 10px;
  padding-top: 8px;
  border-top: 1px dashed #e2e8f0;
  font-size: 14px;
  display: flex;             /* âœ… æŒ‰è¡Œæ’ç‰ˆ */
  flex-wrap: wrap;           /* å°å±è‡ªåŠ¨æ¢è¡Œ */
  align-items: center;
  gap: 6px;
}
.custom-range input[type="date"] {
  padding: 5px 7px;
  border-radius: 8px;
  border: 1px solid #cbd5e1;
  font-size: 13px;
}
@media (max-width: 480px) {
  /* Summary ä¸‰ä¸ªæŒ‰é’®ï¼šç«–ç€æ’ï¼Œä½†ä¸è¦â€œé¡¶æ»¡â€æ•´è¡Œ */
  .summary-buttons {
    flex-direction: column;   /* ä¸€åˆ— */
    align-items: center;      /* å±…ä¸­ */
  }
  .summary-buttons button {
    width: 80%;               /* âœ… ä¸å† 100% äº† */
    max-width: 260px;         /* ä¸Šé™ */
  }
}



    /* Recent records åˆ—è¡¨ */
    #log {
      max-height: 320px;
      overflow-y: auto;
      margin-top: 10px;
      padding-right: 4px;
      font-size: 14px;
    }

    /* Admin åŒºåŸŸ */
    #adminZone {
      margin-top: 18px;
      padding-top: 10px;
      border-top: 1px dashed #cbd5e1;
      display: none; /* é»˜è®¤éšè—ï¼Œåªå¯¹ admin æ‰“å¼€ */
      font-size: 14px;
    }

    /* Pay period çŠ¶æ€æ¡ */
    .pay-period-bar {
      display: none;            /* é»˜è®¤éšè—ï¼Œç­‰ JS åˆ¤æ–­æ˜¯å‘˜å·¥å†æ˜¾ç¤º */
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      margin-bottom: 10px;
      border-radius: 999px;
      background: #eff6ff;
      border: 1px dashed #bfdbfe;
      font-size: 14px;
      color: #1e3a8a;
    }
    .pay-period-badge {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: .04em;
      padding: 3px 8px;
      border-radius: 999px;
      background: #dbeafe;
      color: #1d4ed8;
      font-weight: 600;
      flex-shrink: 0;
    }
    .pay-period-range {
      font-weight: 500;
    }
/* ===== Missed Punch banner (under pay period bar) ===== */
.missed-card{
  display:none; /* é»˜è®¤éšè—ï¼ŒJS æ£€æµ‹åˆ° missedDays æ‰æ˜¾ç¤º */
  margin: 8px 0 14px;
  padding: 12px 14px;
  border-radius: 16px;
  border: 1px solid #fed7aa;
  background: #fff7ed; /* æ¸©å’Œæ©™è‰²æç¤º */
}

.missed-card-top{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
}
/* Missed card çŠ¶æ€è‰²ï¼šæ›´â€œåƒ UIâ€ï¼Œä¸å“äºº */
.missed-card.warn { background:#fff7ed; border-color:#fdba74; }
.missed-card.ok { background:#f0fdf4; border-color:#86efac; }
.missed-card.neutral { background:#f8fafc; border-color:#cbd5e1; }
.missed-card.ok .missed-sub{ color:#166534; }
.missed-card.neutral .missed-sub{ color:#334155; }
.missed-card.warn .missed-sub{ color:#7c2d12; }

.missed-card.ok .missed-title { color:#166534; }
.missed-card.neutral .missed-title { color:#0f172a; }

.missed-title{
  font-weight: 800;
  color: #9a3412;
  font-size: 14px;
  margin-bottom: 2px;
}

.missed-sub{
  font-size: 13px;
  color: #7c2d12;
  opacity: .9;
  line-height: 1.35;
}

.missed-items{
  margin-top: 10px;
  border-top: 1px dashed #fdba74;
  padding-top: 10px;
  display:flex;
  flex-direction:column;
  gap: 8px;
}

.missed-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
}

.missed-item-left{
  display:flex;
  flex-direction:column;
  gap: 2px;
}

.missed-date{
  font-weight: 700;
  color:#9a3412;
  font-size: 13px;
}

.missed-detail{
  font-size: 12px;
  color:#7c2d12;
  opacity: .95;
}

/* Submitted requests section (separate history card) */
.missed-history-card{
  display: none;
  margin: 0 0 14px;
  padding: 14px;
  border-radius: 16px;
  border: 1px solid #e2e8f0;
  background: #f8fafc;
}
.missed-history-title{
  margin: 0 0 10px;
  font-weight: 800;
  font-size: 14px;
  color: #0f172a;
  display: flex;
  align-items: center;
  gap: 6px;
}
.missed-history-card .missed-items{
  margin-top: 0;
  border-top: none;
  padding-top: 0;
}
.missed-history-card .missed-item{
  border: 1px solid #e2e8f0;
  background: #fff;
  border-radius: 12px;
  padding: 8px 10px;
}
.missed-history-card .missed-date{
  color: #0f172a;
}


.badge{
  display:inline-flex;
  align-items:center;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  border: 1px solid #cbd5e1;
  background: #f8fafc;
  color: #0f172a;
  margin-left: 6px;
}

.badge.pending{
  border-color:#f59e0b;
  background:#fffbeb;
  color:#92400e;
}
.badge.approved{
  border-color:#22c55e;
  background:#f0fdf4;
  color:#166534;
}
.badge.denied{
  border-color:#ef4444;
  background:#fef2f2;
  color:#991b1b;
}
.badge.cancelled{
  border-color:#94a3b8;
  background:#f1f5f9;
  color:#334155;
}



.btn-sm{
  padding: 8px 12px;
  font-size: 13px;
  border-radius: 12px;
}

/* ===== Missed Punch Modal ===== */
.mp-overlay{
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.45);
  display: none;              /* é»˜è®¤éšè— */
  align-items: center;
  justify-content: center;
  padding: 18px;
  overflow-y: auto;
  z-index: 9998;
}
.mp-overlay.show{ display:flex; }

.mp-modal{
  width: min(560px, 100%);
  background: #fff;
  border-radius: 18px;
  box-shadow: 0 22px 60px rgba(15, 23, 42, 0.28);
  padding: 16px 16px 14px;
  max-height: calc(100vh - 32px);
  overflow-y: auto;
}

.mp-header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.mp-title{
  font-weight: 800;
  font-size: 16px;
  color:#0f172a;
}

.mp-sub{
  font-size: 13px;
  color:#475569;
  margin-top: 2px;
  line-height: 1.35;
}

.mp-close{
  background:#e2e8f0 !important;
  color:#0f172a !important;
  box-shadow:none !important;
  padding: 6px 10px !important;
  border-radius: 999px !important;
  font-size: 13px !important;
}

.mp-error{
  display:none;
  margin: 10px 0;
  padding: 10px 12px;
  border-radius: 12px;
  background:#fef2f2;
  border:1px solid #fecaca;
  color:#991b1b;
  font-size: 13px;
  line-height: 1.35;
}

.mp-grid{
  display:grid;
  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
  gap: 10px;
}

@media (max-width: 520px){
  .mp-grid{ grid-template-columns: 1fr; }
}

.mp-field label{
  display:block;
  font-size: 12px;
  font-weight: 700;
  color:#334155;
  margin: 2px 0 6px;
}

.mp-field input, .mp-field textarea{
  width: 100%;
  padding: 9px 10px;
  border: 1px solid #cbd5e1;
  border-radius: 12px;
  font-size: 14px;
  outline: none;
}

.mp-hint{
  margin-top: 10px;
  font-size: 12px;
  color:#64748b;
  line-height: 1.35;
}

.mp-actions{
  display:flex;
  justify-content:flex-end;
  gap: 10px;
  margin-top: 12px;
  flex-wrap: wrap;
}

        /* ---- å…¨å±€ toast æ°”æ³¡ ---- */
    #toast {
      position: fixed;
      right: 16px;
      bottom: 16px;
      display: inline-block;
width: fit-content;
max-width: min(640px, calc(100vw - 32px)); /* ä¸Šé™æ”¾å®½ä¸€ç‚¹ï¼Œä½†ä¸ä¼šå¼ºè¡Œå˜å®½ */
min-width: 300px;

/* âœ… å…³é”®ï¼šå·¦å³ç•™ç™½åŠ å¤§ï¼Œç«‹åˆ»â€œä¸æŒ¤â€ï¼Œä½†ä¸ä¼šäº§ç”Ÿå·¨å¤§ç©ºç™½ */
padding: 12px 22px;

      background: #111827;
      color: #f9fafb;
      font-size: 14px;
      border-radius: 999px;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.35);
      opacity: 0;
      transform: translateY(10px);
      pointer-events: none;
      transition: opacity .25s ease, transform .25s ease;
      z-index: 9999;
      line-height: 1.4;
      text-align: left;
      white-space: pre-line; /* æ”¯æŒ \n æ¢è¡Œ */
    }

    #toast.show {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

/* =========================
     Missed Punch Modal Layout
     ========================= */

  /* è®©å¼¹çª—å®½åº¦è‡ªé€‚åº”ï¼Œä¸ä¼šæŒ¤å‡ºå±å¹• */
  #mpOverlay .mp-modal {
    width: min(760px, calc(100vw - 32px));
    max-width: 760px;
    overflow-x: hidden;
  }

  /* é¿å… padding/è¾¹æ¡†æ’‘çˆ†å®½åº¦ */
  #mpOverlay .mp-modal,
  #mpOverlay .mp-modal * {
    box-sizing: border-box;
  }

  /* Date + Noteï¼šå·¦çª„å³å®½ */
  .mp-grid-top {
    display: grid;
    grid-template-columns: 180px 1fr;
    gap: 12px;
  }

  /* ä¸¤åˆ—ï¼ˆClock In/Outã€Lunch Start/Endã€Rest Start/Endï¼‰ */
 .mp-grid-2{
  display:grid;
  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
  gap: 12px;
}


  /* å…³é”®ï¼šå…è®¸å­å…ƒç´ ç¼©å°ï¼Œé˜²æ­¢æŒ¤å‡º */
  .mp-field {
    min-width: 0;
  }

  /* è¾“å…¥æ¡†æ°¸è¿œå¡«æ»¡å®¹å™¨ï¼Œä¸å†™æ­»å®½åº¦ */
  .mp-field input,
  .mp-field textarea,
  .mp-field select {
    width: 100%;
    min-width: 0;
  }

    /* å°å±è‡ªåŠ¨å•åˆ— */
  @media (max-width: 640px) {
    .mp-grid-top,
    .mp-grid-2 {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 520px){
    .mp-overlay{
      align-items: flex-start;
      padding: 12px;
    }

    .mp-modal{
      padding: 12px 12px 10px;
      border-radius: 14px;
      margin-top: 8px;
    }

    .mp-field label{
      font-size: 11px;
      margin-bottom: 4px;
    }

    .mp-field input,
    .mp-field textarea{
      padding: 7px 9px;
      font-size: 13px;
      line-height: 1.2;
    }

    .mp-field input[type="date"],
    .mp-field input[type="time"]{
      min-height: 36px;
      height: 36px;
      -webkit-appearance: none;
      appearance: none;
    }

    .mp-actions{
      margin-top: 10px;
      gap: 8px;
    }
  }
  </style>
</head>
<body>
  
<h1>360WPT TimeClock</h1>

<!-- é¡¶éƒ¨æ¬¢è¿å¡ç‰‡ -->
<div id="welcomeCard">
  <div style="display:flex; justify-content:space-between; align-items:center; width:100%;">
    <div style="display:flex; align-items:center; gap:16px;">
      <div id="welcomeEmoji">ğŸ‘‹</div>
      <div>
        <div id="hello"></div>
        <div id="hello-date"></div>
      </div>
    </div>

    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>
</div>


<!-- å‘˜å·¥æ‰“å¡åŒºåŸŸï¼ˆadmin ä¼šè¢« JS éšè—ï¼‰ -->
<div class="container" id="clockContainer">
  <h2>ğŸ•’ Clocking Zone</h2>

  <!-- å½“å‰çŠ¶æ€ -->
  <div class="status-card">
    <div class="status-dot" id="statusDot"></div>
    <div>
      <div class="status-label" id="statusText">Loading statusâ€¦</div>
      <div class="status-sub">Your current work status</div>
    </div>
  </div>

  <div class="btn-row">
    <button class="blue" onclick="clock('CLOCK_IN')">Clock In</button>
    <button class="blue" onclick="clock('CLOCK_OUT')">Clock Out</button>
  </div>

  <div class="btn-row">
    <button class="green" onclick="clock('MEAL_IN')">Start Lunch Break</button>
    <button class="green" onclick="clock('MEAL_OUT')">End Lunch Break</button>
  </div>

<div class="rest-block">
  <div class="btn-row rest-row">
    <button class="orange rest-start" id="restBtn" onclick="clock('REST_IN')">
      <span class="label-full">Start Rest Break</span>
      <span class="label-short">Start Rest</span>
      <span class="paid-badge">Paid</span>
    </button>

    <button class="orange" id="restOutBtn" onclick="clock('REST_OUT')">
      <span class="label-full">End Rest Break</span>
      <span class="label-short">End Rest</span>
    </button>
  </div>
</div>
</div> <!-- âœ… ç»“æŸ clockContainer -->


<!-- Summary / Export / Recordsï¼ˆadmin/employee å…±ç”¨ï¼‰ -->
<div class="container" id="summaryContainer">
  <h2 id="summaryTitle">ğŸ“Š Summary Zone</h2>

  <div class="pay-period-bar" id="payPeriodBar">
    <span class="pay-period-badge" id="payPeriodLabel">Current pay period</span>
    <span class="pay-period-range" id="payPeriodRange">Loadingâ€¦</span>
  </div>

  <div class="summary-buttons" id="employeeSummaryButtons">
    <button class="purple" onclick="viewSummary()">View Hours This Period</button>
    <button class="black"  onclick="exportMyCurrent()">Export Current Period</button>
    <button class="black"  onclick="exportMyAll()">Export All History</button>
  </div>

  <div class="custom-range" id="employeeCustomRange">
    <span>Custom range (me):</span>
    <input type="date" id="myRangeStart" />
    <span>to</span>
    <input type="date" id="myRangeEnd" />
    <button class="black" onclick="exportMyCustom()">Export</button>
  </div>

  <!-- Missed Punch bannerï¼ˆæ”¾åœ¨ Summary Zone ä¸‹é¢ âœ…ï¼‰ -->
  <div class="missed-card" id="missedPunchCard">
    <div class="missed-card-top">
      <div>
        <div class="missed-title" id="missedPunchTitle">âš ï¸ Missed punches detected</div>
        <div class="missed-sub" id="missedPunchSubtitle">
          Please submit a Missed Punch Request. An admin will review before payroll/export counts these hours.
        </div>
      </div>

      <button class="purple btn-sm" id="mpOpenBtn" onclick="openMissedPunchModal()">
        Missed Punch Request
      </button>
    </div>

    <!-- ç³»ç»Ÿæ£€æµ‹åˆ°çš„ missed daysï¼ˆæœ‰çš„è¯ JS å¡«å……ï¼‰ -->
    <div class="missed-items" id="missedPunchItems"></div>

     </div>

  <!-- å‘˜å·¥è‡ªå·±æäº¤çš„ requestsï¼ˆå†å²è®°å½•ï¼Œå•ç‹¬æ˜¾ç¤ºï¼‰ -->
  <div class="missed-history-card" id="mpReqSection">
    <div id="mpReqTitle" class="missed-history-title">
        ğŸ“¬ Your submitted requests
      </div>
       <div class="missed-items" id="mpReqItems"></div>
  </div>

  <!-- Recent recordsï¼šå¿…é¡»åœ¨ missedPunchCard å¤–é¢ âœ… -->
  <div id="log"></div>

  <!-- Admin only -->
  <div id="adminZone">
    <h3>ğŸ‘‘ Admin Zone</h3>

       <div class="admin-filters">
      <div class="admin-field">
        <label for="adminEmployeeSelect">Employee:</label>
        <select id="adminEmployeeSelect" class="admin-select">
          <option value="">All employees</option>
        </select>
      </div>
            <div class="admin-field">
        <label for="adminGroupSelect">Group:</label>
        <select id="adminGroupSelect" class="admin-select">
          <option value="">All groups</option>
          <option value="therapist">Therapist</option>
          <option value="non-therapist">Non-therapist</option>
        </select>
      </div>
       <div id="adminFilterHint" class="admin-filter-hint">
        Choose either Employee or Group.
      </div>
    </div>

    <div class="summary-buttons admin-summary-buttons">
      <button class="purple" onclick="adminExportCurrent()">Export Current Period</button>
      <button class="black"  onclick="adminExportAll()">Export All History</button>
    </div>

    <div class="custom-range admin-custom-range">
      <div style="margin-bottom: 4px;">Custom range (admin):</div>
      <input type="date" id="adminRangeStart" />
      <span>to</span>
      <input type="date" id="adminRangeEnd" />
       <button class="black admin-export-btn" onclick="adminExportCustom()">Export</button>
    </div>

    <div class="account-card" id="adminResetCard">
      <h3>Reset employee password</h3>
      <div class="account-form">
        <div class="account-field">
          <label for="adminResetEmployee">Employee</label>
          <select id="adminResetEmployee" class="admin-select">
            <option value="">Select employee</option>
          </select>
        </div>
        <div class="account-field">
          <label for="adminResetPassword">New password</label>
          <input type="password" id="adminResetPassword" placeholder="Enter new password" />
        </div>
        <div class="account-actions">
          <button class="black" type="button" onclick="adminResetPassword()">Reset Password</button>
        </div>
      </div>
    </div>

    <div id="adminMissedPunchPanel" class="admin-panel">
      <div class="admin-panel-title">ğŸ“ Missed Punch Requests (Pending)</div>
      <div id="adminMissedPunchList" class="admin-mp-list"></div>
    </div>
  </div>

  <div class="account-card" id="accountCard">
    <h3>My Account</h3>
    <div class="account-form">
      <div class="account-field">
        <label for="currentPassword">Current password</label>
        <input type="password" id="currentPassword" />
      </div>
      <div class="account-field">
        <label for="newPassword">New password</label>
        <input type="password" id="newPassword" />
      </div>
      <div class="account-field">
        <label for="confirmPassword">Confirm password</label>
        <input type="password" id="confirmPassword" />
      </div>
      <div class="account-actions">
        <button class="black" type="button" onclick="changeMyPassword()">Update Password</button>
      </div>
    </div>
  </div>
</div>

<div class="review-overlay" id="adminReviewOverlay">
  <div class="review-modal">
    <h3 id="adminReviewTitle">Review Missed Punch</h3>
    <p id="adminReviewSubtitle" style="margin-top:0; color:#475569; font-size:13px;">
      Add an optional note for this decision.
    </p>
    <textarea id="adminReviewNote" placeholder="Decision note (optional)"></textarea>
    <div class="review-actions">
      <button class="black" type="button" onclick="closeAdminReviewModal()">Cancel</button>
      <button class="green" type="button" id="adminReviewConfirmBtn">Confirm</button>
    </div>
  </div>
</div>
<!-- Missed Punch Modalï¼ˆé»˜è®¤éšè—ï¼ŒJS æ§åˆ¶ show/hideï¼‰ -->
<div class="mp-overlay" id="mpOverlay">
  <div class="mp-modal">
    <div class="mp-header">
      <div>
        <div class="mp-title">Missed Punch Request</div>
        <div class="mp-sub">
          Fill in the correct times for the missed day. Lunch/rest must be entered in pairs. Rest is disabled for therapists.
        </div>
      </div>
      <button class="mp-close" type="button" onclick="closeMissedPunchModal()">âœ•</button>
    </div>

    <div class="mp-error" id="mpErrorBox"></div>

    <form id="mpForm" onsubmit="submitMissedPunch(event)">
   <!-- Date + Note -->
<div class="mp-grid-top">
  <div class="mp-field">
    <label>Date</label>
    <input type="date" id="mpDate" required />
  </div>

  <div class="mp-field">
    <label>Note (optional)</label>
    <input type="text" id="mpNote" placeholder="e.g., Forgot to clock out" />
  </div>
</div>

<!-- Clock In / Clock Out -->
<div class="mp-grid-2" style="margin-top:10px;">
  <div class="mp-field">
    <label>Clock In</label>
    <input type="time" id="mpClockIn" required />
  </div>

  <div class="mp-field">
    <label>Clock Out</label>
    <input type="time" id="mpClockOut" required />
  </div>
</div>

<!-- Lunch Start / Lunch End -->
<div class="mp-grid-2" style="margin-top:10px;">
  <div class="mp-field">
    <label>Lunch Start</label>
    <input type="time" id="mpMealIn" />
  </div>

  <div class="mp-field">
    <label>Lunch End</label>
    <input type="time" id="mpMealOut" />
  </div>
</div>

<!-- Rest Start / Rest End -->
<div class="mp-grid-2" style="margin-top:10px;">
  <div class="mp-field" id="mpRestInWrap">
    <label>Rest Start</label>
    <input type="time" id="mpRestIn" />
  </div>

  <div class="mp-field" id="mpRestOutWrap">
    <label>Rest End</label>
    <input type="time" id="mpRestOut" />
  </div>
</div>

      <div class="mp-hint" id="mpHint">
        Tip: lunch/rest must be entered as start + end. If you didnâ€™t take lunch/rest, leave both blank.
      </div>

      <div class="mp-actions">
        <button type="button" class="black btn-sm" onclick="closeMissedPunchModal()">Cancel</button>
        <button type="submit" class="purple btn-sm" id="mpSubmitBtn">Submit</button>
      </div>
    </form>
  </div>
</div>

<div id="toast"></div>

<!-- å‰ç«¯é€»è¾‘ -->
<script src="/app.js"></script>

</body>
</html>
